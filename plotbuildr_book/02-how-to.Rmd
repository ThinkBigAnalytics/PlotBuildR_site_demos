# Going Deeper {#how-to}

This chapter contains detailed description about the arguments each plot takes.

Below are all the arguments that the `PlotBuildR::renderPlotBuildR()` function takes

```{}
names(as.list(args(PlotBuildR::renderPlotBuildR)))[-29]
```

The reason why we have provided all these arguments is that when you finalise your plot, you can come back to the server side and fix all the arguments, so that you never lose the state of your plot. All the values should be quoted strings, for eg. `df = "iris"`, except for the `df_list` and `reactive_df` arguments, which take a `list()` as value.

As previously mentioned in \@ref(plot) section, you can plot several plots using *plotbuildR*. Let's look at them in detail

## Plotly Plots {}

Plotly gives us a very rich interactive visualisation library. We have delicately selected the settings, so that you can make a presentable plot with it, without the need to know code to make such plots. 

> Note: If you are expert in Plotly and if it doesn't take more than 2 mins to plot, then we recommend you to stick with it, because plotbuildR gives only limited setting ooptions. 

As the data science and visualisation go hand in hand, we have tried to be consistent with the workflow by using some tidyverse functions for data analysis and plotbuildR to easily visualise the data. 

We will use `gapminder` dataset throughout this section.

### Multiple Bar Plot {}

To plot a Multiple Bar Plot, you can run the Getting Started app given in Chapter \@ref(getting-started). Click on the plot settings button, explained in Chapter \@ref(plot-settings).

After selecting the Multiple Bar Plot icon and you can go to the Settings tab. 

You will see the following setting options

```{r, echo=F}
knitr::include_graphics("images/mbp_settings.png")
```

The `Dataset Choices` dropdown item let's you select the data frame of your choice from the list that you passed in `df_list` and / or `reactive_df` argument. You can then select the `X-Axis`, `Y-Axis` and `Y2-Axis` from the respective dropdown lists, which contain the column names of the data frame selected.

> Note: plotbuildR automatically checks the column type and only selects dbl or int type columns for Y-Axis

You can also specify the arguments in the server side logic of *plotbuildR*. An example is provided in the sub-section of each plot.

Multiple Bar Plot takes the following arguments

```{}
x, y, y2, plot_type = "Multiple Bar Plot", title, x_label & y_label 
```

**Example**

Let's start by loading the data and look at the first 6 rows of the dataset

```{r}
library(gapminder)
library(magrittr)

gapminder %>% head(6)
```

Now let's look at the top 2 countries in each continent with highest life expectancy.

Below is the sample code that will launch a shiny app with a Multiple Bar Plot using the user-defined arguments. 

```{}
library(shiny)
library(shinydashboard)
library(gapminder)
library(tidyverse)
library(PlotBuildR)

ui <- fluidPage(
  fluidRow(
    PlotBuildR::plotBuildROutput("plot", col_width = 8, status = "danger", solidHeader = T)
  )
)

server <- function(input, output, session){
  
  rdf_list <- list()
  
  rdf_list$top_2_cuntries <- reactive({
    gapminder %>% 
      mutate(country = as.character(country)) %>% 
      filter(year >= 2002) %>% 
      group_by(continent, year) %>% 
      top_n(n = 2, wt = lifeExp) %>% 
      select(-pop, -gdpPercap) %>% 
      mutate(country_continent = paste(country, continent, sep = ", ")) %>% 
      spread(year, lifeExp) %>% 
      drop_na()
  })
  
  renderPlotBuildR("plot", 
                   reactive_df = rdf_list, df = "top_2_cuntries",
                   x = "country_continent", plot_type = "Multiple Bar Plot", 
                   x_label = "Country, Continent", y_label = "Life Expectancy", 
                   title = "Life Expectancy of Top 2 Countries Per Continent")
  
}

shinyApp(ui, server)

```

> We will continue working on the same app from this point.

The code above will generate the following plot

```{r, echo=F}
knitr::include_graphics("images/multiple_bar_plot.png")
```

-------------

### Bar Plot {}

Bar Plot takes the following arguments

```{}
df, x, y, color, plot_type, bar_mode, 
bar_orientation, title, x_label, y_label
```

Let's plot and see the average GDP per capita of each continent for the last 4 years

```{}
## Server Logic

server <- function(input, output, server){
  
  rdf_list$gdp_per_continent <- reactive({
    gapminder_unfiltered %>% 
      filter(year > 2003) %>% 
      mutate(year = as.character(year)) %>% 
      group_by(continent, year) %>% 
      summarise(avg_gdp = mean(gdpPercap, na.rm = T))
  })
  
  renderPlotBuildR("plot",
                   df_list = df_list, reactive_df = rdf_list,
                   df = "gdp_per_continent", x = "year", color = "continent",
                   plot_type = "Bar Plot", x_label = "Year",
                   y_label = "Average GDP per Capita (in $)", 
                   title = "Avg. GDP per Capita per Continent")
}

```

The code above will generate the following plot

```{r, echo=F}
knitr::include_graphics("images/bar_plot.png")
```

-------------

### Scatter Plot {}

Scatter Plot takes the following arguments

```{}
## df, x, y, color, size, plot_type, 
## title, x_label, y_label 
```

Since we have 3 numeric variables, we can plot a scatter plot to compare average life expectancy and GDP per capita of the countries in the Americas during the year 2007. The size of the bubble tells the population of that country

```{}
## Server Logic

server <- function(input, output, server){
  
  rdf_list$gdp_per_country <- reactive({
    gapminder_unfiltered %>% 
      filter(year == 2007, continent %in% "Americas")
  })
  
  renderPlotBuildR("plot",
                   df_list = df_list, reactive_df = rdf_list, df = "gdp_per_country", 
                   x = "lifeExp", y = "gdpPercap", color = "country", size = "pop",
                   plot_type = "Scatter Plot", x_label = "Life Expectancy",
                   y_label = "Average GDP per Capita (in $)", 
                   title = "Avg. GDP vs Avg. Life Expectancy per Country")
}

```

The code above will generate the following plot

```{r, echo=F}
knitr::include_graphics("images/2.1.3_scatter_plot.png")
```

-------------

### Multiple Line Plot {}

Multiple Bar Plot takes the following arguments

```{}
x, y, y2, plot_type, title, x_label & y_label 
```

Here is the sample code that will produce the Multiple Bar Plot using the user-defined arguments.

```{}
## Server Logic

server <- function(input, output, server){
  
    renderPlotBuildR("plot", 
                   df_list = df_list, df = "iris",
                   x = "Species", y = "Petal.Length", y2 = "Petal.Width", 
                   plot_type = "Multiple Bar Plot", title = "Petal Length vs Width per Species", 
                   x_label = "Species", y_label = "Length")
}

```

The code above will generate the following plot

```{r, echo=F}
knitr::include_graphics("images/multiple_bar_plot.png")
```

-------------

### Line Plot {}

Line Plot takes the following arguments

```{}
x, y, color, plot_type = "Line Plot", title, x_label & y_label 
```

Here is the sample code that uses the gapminder data to produce a line chart.

```{}
library(gapminder)

df_lidt <- list()
df_list <- "gapminder"

## Server Logic


server <- function(input, output, server){
  
      renderPlotBuildR("plot", 
                   df_list = df_list, df = "gapminder", x = "year", y = "lifeExp", color = "country", 
                   plot_type = "Line Plot", title = "Yearly Life Expectancy per Country",
                   x_label = "Year", y_label = "Avg. Life Expectancy")
}

```

The code above will generate the following plot

```{r, echo=F}
knitr::include_graphics("images/line_plot.png")
```

-------------

### Area Plot {}

Multiple Bar Plot takes the following arguments

```{}
x, y, y2, plot_type, title, x_label & y_label 
```

Here is the sample code that will produce the Multiple Bar Plot using the user-defined arguments.

```{}
## Server Logic

server <- function(input, output, server){
  
    renderPlotBuildR("plot", 
                   df_list = df_list, df = "iris",
                   x = "Species", y = "Petal.Length", y2 = "Petal.Width", 
                   plot_type = "Multiple Bar Plot", title = "Petal Length vs Width per Species", 
                   x_label = "Species", y_label = "Length")
}

```

The code above will generate the following plot

```{r, echo=F}
knitr::include_graphics("images/multiple_bar_plot.png")
```

-------------

### Histogram {}

Multiple Bar Plot takes the following arguments

```{}
x, y, y2, plot_type, title, x_label & y_label 
```

Here is the sample code that will produce the Multiple Bar Plot using the user-defined arguments.

```{}
## Server Logic

server <- function(input, output, server){
  
    renderPlotBuildR("plot", 
                   df_list = df_list, df = "iris",
                   x = "Species", y = "Petal.Length", y2 = "Petal.Width", 
                   plot_type = "Multiple Bar Plot", title = "Petal Length vs Width per Species", 
                   x_label = "Species", y_label = "Length")
}

```

The code above will generate the following plot

```{r, echo=F}
knitr::include_graphics("images/multiple_bar_plot.png")
```

-------------

### Box Plot {}

Multiple Bar Plot takes the following arguments

```{}
x, y, y2, plot_type, title, x_label & y_label 
```

Here is the sample code that will produce the Multiple Bar Plot using the user-defined arguments.

```{}
## Server Logic

server <- function(input, output, server){
  
    renderPlotBuildR("plot", 
                   df_list = df_list, df = "iris",
                   x = "Species", y = "Petal.Length", y2 = "Petal.Width", 
                   plot_type = "Multiple Bar Plot", title = "Petal Length vs Width per Species", 
                   x_label = "Species", y_label = "Length")
}

```

The code above will generate the following plot

```{r, echo=F}
knitr::include_graphics("images/multiple_bar_plot.png")
```

-------------

### Pie Chart {}

Multiple Bar Plot takes the following arguments

```{}
x, y, y2, plot_type, title, x_label & y_label 
```

Here is the sample code that will produce the Multiple Bar Plot using the user-defined arguments.

```{}
## Server Logic

server <- function(input, output, server){
  
    renderPlotBuildR("plot", 
                   df_list = df_list, df = "iris",
                   x = "Species", y = "Petal.Length", y2 = "Petal.Width", 
                   plot_type = "Multiple Bar Plot", title = "Petal Length vs Width per Species", 
                   x_label = "Species", y_label = "Length")
}

```

The code above will generate the following plot

```{r, echo=F}
knitr::include_graphics("images/multiple_bar_plot.png")
```

-------------

### Heatmap {}

Multiple Bar Plot takes the following arguments

```{}
x, y, y2, plot_type, title, x_label & y_label 
```

Here is the sample code that will produce the Multiple Bar Plot using the user-defined arguments.

```{}
## Server Logic

server <- function(input, output, server){
  
    renderPlotBuildR("plot", 
                   df_list = df_list, df = "iris",
                   x = "Species", y = "Petal.Length", y2 = "Petal.Width", 
                   plot_type = "Multiple Bar Plot", title = "Petal Length vs Width per Species", 
                   x_label = "Species", y_label = "Length")
}

```

The code above will generate the following plot

```{r, echo=F}
knitr::include_graphics("images/multiple_bar_plot.png")
```

-------------

### Contour Plot {}

Multiple Bar Plot takes the following arguments

```{}
x, y, y2, plot_type, title, x_label & y_label 
```

Here is the sample code that will produce the Multiple Bar Plot using the user-defined arguments.

```{}
## Server Logic

server <- function(input, output, server){
  
    renderPlotBuildR("plot", 
                   df_list = df_list, df = "iris",
                   x = "Species", y = "Petal.Length", y2 = "Petal.Width", 
                   plot_type = "Multiple Bar Plot", title = "Petal Length vs Width per Species", 
                   x_label = "Species", y_label = "Length")
}

```

The code above will generate the following plot

```{r, echo=F}
knitr::include_graphics("images/multiple_bar_plot.png")
```

-------------

## NetworkD3 Graphs


### Simple Network {}

Multiple Bar Plot takes the following arguments

```{}
x, y, y2, plot_type, title, x_label & y_label 
```

Here is the sample code that will produce the Multiple Bar Plot using the user-defined arguments.

```{}
## Server Logic

server <- function(input, output, server){
  
    renderPlotBuildR("plot", 
                   df_list = df_list, df = "iris",
                   x = "Species", y = "Petal.Length", y2 = "Petal.Width", 
                   plot_type = "Multiple Bar Plot", title = "Petal Length vs Width per Species", 
                   x_label = "Species", y_label = "Length")
}

```

The code above will generate the following plot

```{r, echo=F}
knitr::include_graphics("images/multiple_bar_plot.png")
```

-------------

### Force Network {}

Multiple Bar Plot takes the following arguments

```{}
x, y, y2, plot_type, title, x_label & y_label 
```

Here is the sample code that will produce the Multiple Bar Plot using the user-defined arguments.

```{}
## Server Logic

server <- function(input, output, server){
  
    renderPlotBuildR("plot", 
                   df_list = df_list, df = "iris",
                   x = "Species", y = "Petal.Length", y2 = "Petal.Width", 
                   plot_type = "Multiple Bar Plot", title = "Petal Length vs Width per Species", 
                   x_label = "Species", y_label = "Length")
}

```

The code above will generate the following plot

```{r, echo=F}
knitr::include_graphics("images/multiple_bar_plot.png")
```

-------------

### Sankey Network {}

Multiple Bar Plot takes the following arguments

```{}
x, y, y2, plot_type, title, x_label & y_label 
```

Here is the sample code that will produce the Multiple Bar Plot using the user-defined arguments.

```{}
## Server Logic

server <- function(input, output, server){
  
    renderPlotBuildR("plot", 
                   df_list = df_list, df = "iris",
                   x = "Species", y = "Petal.Length", y2 = "Petal.Width", 
                   plot_type = "Multiple Bar Plot", title = "Petal Length vs Width per Species", 
                   x_label = "Species", y_label = "Length")
}

```

The code above will generate the following plot

```{r, echo=F}
knitr::include_graphics("images/multiple_bar_plot.png")
```

-------------

### Dendro Network {}

Multiple Bar Plot takes the following arguments

```{}
x, y, y2, plot_type, title, x_label & y_label 
```

Here is the sample code that will produce the Multiple Bar Plot using the user-defined arguments.

```{}
## Server Logic

server <- function(input, output, server){
  
    renderPlotBuildR("plot", 
                   df_list = df_list, df = "iris",
                   x = "Species", y = "Petal.Length", y2 = "Petal.Width", 
                   plot_type = "Multiple Bar Plot", title = "Petal Length vs Width per Species", 
                   x_label = "Species", y_label = "Length")
}

```

The code above will generate the following plot

```{r, echo=F}
knitr::include_graphics("images/multiple_bar_plot.png")
```

-------------

## Leaflet {}

### Map {}

Multiple Bar Plot takes the following arguments

```{}
x, y, y2, plot_type, title, x_label & y_label 
```

Here is the sample code that will produce the Multiple Bar Plot using the user-defined arguments.

```{}
## Server Logic

server <- function(input, output, server){
  
    renderPlotBuildR("plot", 
                   df_list = df_list, df = "iris",
                   x = "Species", y = "Petal.Length", y2 = "Petal.Width", 
                   plot_type = "Multiple Bar Plot", title = "Petal Length vs Width per Species", 
                   x_label = "Species", y_label = "Length")
}

```

The code above will generate the following plot

```{r, echo=F}
knitr::include_graphics("images/multiple_bar_plot.png")
```

-------------

## Parcoords {}

### Parallel Coordinates {}

Multiple Bar Plot takes the following arguments

```{}
x, y, y2, plot_type, title, x_label & y_label 
```

Here is the sample code that will produce the Multiple Bar Plot using the user-defined arguments.

```{}
## Server Logic

server <- function(input, output, server){
  
    renderPlotBuildR("plot", 
                   df_list = df_list, df = "iris",
                   x = "Species", y = "Petal.Length", y2 = "Petal.Width", 
                   plot_type = "Multiple Bar Plot", title = "Petal Length vs Width per Species", 
                   x_label = "Species", y_label = "Length")
}

```

The code above will generate the following plot

```{r, echo=F}
knitr::include_graphics("images/multiple_bar_plot.png")
```

------------------------------------------------------------------